## 백준알고리즘 - 2469. 사다리 타기

- 관련된 알고리즘 : 구현, 문자열

### 문제

k명의 참가자들이 사다리 타기를 통하여 어떤 순서를 결정한다. 참가자들은 알파벳 대문자 첫 k개로 표현되며, 사다리 타기를 시작할 때의 순서는 아래 그림과 같이 항상 알파벳 순서대로이다. 

k=10 인 예를 들어 보자. 10명의 A, B, C, D, E, F, G, H, I, J 참가자들이 사다리 타기를 준비한다. 아래 그림은 10개의 세로 줄과 5개의 가로 줄을 가지고 있는 사다리의 한 예를 보여주고 있다.  

![img](https://www.acmicpc.net/upload/images/w5.png)

이 사다리에서 점선은 가로 막대가 없음을, 굵은 가로 실선은 옆으로 건너갈 수 있는 가로 막대가 있음을 나타내고 있다.  

따라서 위에 제시된 사다리를 타면 그 최종 도달된 순서는 왼쪽으로부터 A, C, G, B, E, D, J, F, I, H 가 된다. 

사다리 타기는 세로 막대를 타고 내려오는 중에 가로막대를 만나면 그 쪽으로 옮겨 가면서 끝까지 내려가는 과정이다.  따라서 사다리 타기의 규칙 특성상 아래 그림과 같이 두 가로 막대가 직접 연결될 수는 없으므로 이 상황은 이 문제에서 고려할 필요가 없다.

![img](https://www.acmicpc.net/upload/images/w6.png)

우리는 하나의 가로 줄이 감추어진 사다리를 받아서 그 줄의 각 칸에 가로 막대를 적절히 넣어서 참가자들의 최종 순서가 원하는 순서대로 나오도록 만들려고 한다.  

입력에서 사다리의 전체 모양은 각 줄에 있는 가로 막대의 유무로 표현된다. 각 줄에서 가로 막대가 없는 경우에는 ‘*’(별)문자, 있을 경우에는 ‘-’(빼기) 문자로 표시된다. 그리고 감추어진 특정 가로 줄은 길이 k-1인 ‘?’ (물음표) 문자열로 표시되어 있다.  

### 입력

첫 줄에는 참가한 사람의 수 k가 나온다(3≤k≤26). 그 다음 줄에는 가로 막대가 놓일 전체 가로 줄의 수를 나타내는 n이 나온다(3≤n≤1,000). 그리고 세 번째 줄에는 사다리를 타고 난 후 결정된 참가자들의 최종 순서가 길이 k인 대문자 문자열로 들어온다.  

k와 n, 그리고 도착순서 문자열이 나타난 다음, 이어지는 n개의 줄에는 앞서 설명한 바와 같이 ‘*’와 ‘-’ 문자로 이루어진 길이 k-1인 문자열이 주어진다. 그 중 감추어진 가로 줄은 길이가 k-1인 ‘?’ 문자열로 표시되어 있다.

### 출력

입력 파일 세 번째 줄에서 지정한 도착순서가 해당 사다리에서 만들어질 수 있도록 감추어진 가로 줄을 구성해야 한다. 

여러분은 감추어진 가로 줄의 상태를 재구성하여 이를 ‘*’(별) 문자와 ‘-’(빼기) 문자로 구성된 길이 k-1인 문자열로 만들어 출력하면 된다.

그런데 어떤 경우에는 그 감추어진 가로 줄을 어떻게 구성해도 원하는 순서를 얻을 수 없는 경우도 있다.  이 경우에는  ‘x’(소문자 엑스)로 구성된 길이 k-1인 문자열을 출력해야 한다.

### 예제

```
Input : 10
        5
        ACGBEDJFIH
        *-***-***
        -*-******
        ?????????
        -**-***-*
        **-*-*-*-
Output : **-*-***-
```

### 해결

```python
# 50분
# 도움&참조 : O

# 1. A부터 순서대로 k개의 알파벳의 배열을 만든다.
# 2. ?로 시작하는 사다리가 나올 때 까지 1에서 만든 배열을 주어진 사다리에 따라 바꾸어 나간다.
# 3. ?로 시작하는 사다리를 만나면 그 이후의 사다리들을 배열에 넣고 뒤집어 준다.
# 4. 정답 배열을 3의 배열에서 순서대로 꺼내며 사다리에 맞게 정답 배열을 바꾸어 나간다.(3에서 뒤집에 주었으므로 정답 배열은 가장 밑의 사다리부터 따라가게 된다.)
# 5. 1의 배열과 4의 배열을 비교하여 적절한 사다리 모양을 만든다.

import string, sys
al = string.ascii_uppercase

k=int(sys.stdin.readline())
n=int(sys.stdin.readline())
al = list(al[:k])
answer = list(sys.stdin.readline()[:-1])

def swap(i):
    temp = al[i]
    al[i] = al[i+1]
    al[i+1] = temp
 
def swap2(i):
    temp = answer[i]
    answer[i] = answer[i+1]
    answer[i+1] = temp
 
for i in range(n):
    ladder = sys.stdin.readline().split()[0]
    if ladder[0] == "?":
        break
    else:
        for idx,l in enumerate(ladder):
            if l =="-":
                swap(idx)
 
rest = [sys.stdin.readline().split()[0] for _ in range(i+1,n)]
rest.reverse()
for ladder in rest:
    for idx,l in enumerate(ladder):
        if l =="-":
            swap2(idx)
ans = ""
 
for i in range(k-1):
    if al[i] == answer[i]:
        ans += "*"
    elif al[i] == answer[i+1] and al[i+1]==answer[i] and (i==0 or ans[-1] == "*"):
        ans += "-"
        swap(i)
    else:
        ans = "x" * (k-1)
        break
        
print(ans)
```

### 설명

1. A부터 순서대로 k개의 알파벳의 배열을 만든다.

2. ?로 시작하는 사다리가 나올 때 까지 1에서 만든 배열을 주어진 사다리에 따라 바꾸어 나간다.

3. ?로 시작하는 사다리를 만나면 그 이후의 사다리들을 배열에 넣고 뒤집어 준다.

4. 정답 배열을 3의 배열에서 순서대로 꺼내며 사다리에 맞게 정답 배열을 바꾸어 나간다.(3에서 뒤집에 주었으므로 정답 배열은 가장 밑의 사다리부터 따라가게 된다.)

5. 1의 배열과 4의 배열을 비교하여 적절한 사다리 모양을 만든다.

### 참조

- [코드 및 설명](https://hellya.tistory.com/34)

### 출처

- https://www.acmicpc.net/problem/2469
